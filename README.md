# 分析手順・方法

### 各カラムの値を見る
    value_counts()

### 分布を見る
    matplotlibやseabornでデータの分布を見る
    正規分布かなどカラムごとやpairplotや散布図で複数のカラム間の分布確認

### 相関係数を見る(ただし線形前提)
    df.corr()
    線形の関係の強弱を見る

### データの統計量を見る
    正規分布のdescribe()、相関係数の高い特徴量の統計量を見る
    ・整数型のカラムだけpairplot

### 割合を見る

### カテゴリデータ変換
    ・カテゴリデータを割合(数値)に変換
    ・カテゴリの割合をランクに変換する
    ・カテゴリ内での正解クラスに所属する総数-不正解クラスの総数で割合を割る。

## 分析対象にしないデータを外す
    ・重要度が低い
    ・論理的に考えて排除

## 共線性回避
    相関の高い説明変数の組み合わせを複数入れると回帰係数の分散が増大。
    方程式が解けなったりする。

### 正解データでの統計量を見る
    ・正解ラベルでネガティブな客とポジティブな客に分けるなど

## 重要度
    回帰なら.coef_や.intercept_で傾きや切片を確認。
    決定木系なら重要度を見て関連性の高いカラムを見る


## σでの外れ値除外
    σの68.3%や2σの95.4%などの範囲に収まる値だけで分析にかける。  
    収まらない特徴量は除外する。

## データの分割方法
    学習サンプル数
    ・100前後         リーブワンアウト  
    ・1000前後       テンフォールド、クロスバリデーション  
    ・10,000前後    Kホールド、クロスバリデーション
    ・100,000前後  ホールドアウト、それ以外は難しい。
    ワングループアウトなども場合によっては使用

## 外れ値の除外
    プロットして例外値を除外
    ・例外値は大きく外れている値
    ・大きく外れてはいないが2σの範囲など規定の外れている値など

## 欠損値を埋める
* Impurator  

    ・平均で埋める
    ・中央値で埋める
    ・線形or非線形補完

## センタリング
    平均を引いて分布のセンタリング

## まずは標準化(Standardization)
    trainデータを標準化したインスタンスでtestデータを標準化してOK。
    testデータは平均0、標準偏差1とちょっとずれるがOK。正規化より外れ値に対してロバスト性(影響を受けにくさ)が高い。
## 正則化
    ノルムを1にする。スケールが合っていないと片方がかなり小さい値になってしまうことがある。
    L1、L2、MAXなどがある
    パラメータは「norm = 」
## 正規化
    normalization。

## 特徴選択(feature_selection)
> #### SelectKBest
    ・識別器にかけて精度に影響ある特徴量を選ぶ
    精度 と KBestで選んだ特徴量数k と(精度の標準偏差)をプロット。
    標準偏差でばらつきが小さい所、少ない特徴量を選ぶ。
> #### RFE
    ?
> #### RFECV
    ?


## 特徴量変換
    ・特徴量同士の組み合わて値を出す。合計、差、かける、割合にするなど
    特徴量に重み付け…線形変換
    ・PCA(主成分分析)…相関の強いデータを線形変換して
    　1つの値が決まればもう一方の値が決定するように変換
    　分散が大きい方向に回転する。

## PCA白色化
    PCAのパラメータ「whiet = True」にする
    相関が有るものを相関が無いように変換
    PCAは分散の大きい方向に回転、一方の方向高いがもう一方は分散が低い。PCAホワイトニングは分散が高い方を見つけ出して分散を低くするよう変換。
    長方形を正方形に縮めるようなイメージ

## ZCA白色化
    PCAで回転➔PCAで白色化して分散が減る➔回転前の空間に戻す
    高次元にも適用可能

# 精度の検証系

## confusion matrix
    TPRやFPRを見る。
    分類したものが何個合ってるか、間違っているかを出力
    本来どの分類いくつ正解か不正解の分類かを見る。

## ROC
    面積が正確性を表す。左上に近い線が引けるといい

## 学習曲線
    いくつのサンプル数で精度がどう変わっていくかを
    示す。バリアンスバイアスの可視化。

## 誤差検証・誤分類検証
    誤差が大きいもの、誤分類したもののデータを見る
    どこに原因がありそうか、どの特徴量のものがミスしてるかを探す。

## クロスバリデーション

# パラメータの設定
## 検証曲線
    パラメータの値によって精度がどう変わるかを示す
    最適なパラメータ設定を探す時に使う。
## グリッドサーチ
    指定したパラメータを総当たりで試す。
    パラメータの良い組み合わせを見つけるときに使用
